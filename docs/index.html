<!DOCTYPE html>
<html lang="en">
  <head>
    <title>MBMessagesSwift  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset="utf-8">
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
    <script src="js/lunr.min.js" defer></script>
    <script src="js/typeahead.jquery.js" defer></script>
    <script src="js/jazzy.search.js" defer></script>
  </head>
  <body>


    <a title="MBMessagesSwift  Reference"></a>

    <header class="header">
      <p class="header-col header-col--primary">
        <a class="header-link" href="index.html">
          MBMessagesSwift 0.1 Docs
        </a>
         (100% documented)
      </p>
    
      <p class="header-col--secondary">
        <form role="search" action="search.json">
          <input type="text" placeholder="Search documentation" data-typeahead>
        </form>
      </p>
    
        <p class="header-col header-col--secondary">
          <a class="header-link" href="https://github.com/Mumble-SRL/MBMessagesSwift">
            <img class="header-icon" src="img/gh.png"/>
            View on GitHub
          </a>
        </p>
    
    </header>

    <p class="breadcrumbs">
      <a class="breadcrumb" href="index.html">MBMessagesSwift Reference</a>
      <img class="carat" src="img/carat.png" />
      MBMessagesSwift  Reference
    </p>

    <div class="content-wrapper">
      <nav class="navigation">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="MBMessages.html">MBMessages</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/MBMessages.html">MBMessages</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/MBMessagesDelegate.html">MBMessagesDelegate</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="In%20App%20Messages.html">In App Messages</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/MBInAppMessage.html">MBInAppMessage</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/MBInAppMessageStyle.html">MBInAppMessageStyle</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/MBInAppMessageViewBackgroundStyle.html">MBInAppMessageViewBackgroundStyle</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/MBInAppMessageButton.html">MBInAppMessageButton</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/MBInAppMessageButtonLinkType.html">MBInAppMessageButtonLinkType</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Views.html">Views</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Views.html#/c:@M@MBMessagesSwift@objc(cs)MBInAppMessageView">MBInAppMessageView</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/MBInAppMessageViewDelegate.html">MBInAppMessageViewDelegate</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/MBInAppMessageViewStyleDelegate.html">MBInAppMessageViewStyleDelegate</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/MBInAppMessageTopBannerView.html">MBInAppMessageTopBannerView</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/MBInAppMessageBottomBannerView.html">MBInAppMessageBottomBannerView</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Views.html#/c:@M@MBMessagesSwift@objc(cs)MBInAppMessageCenterView">MBInAppMessageCenterView</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Views.html#/c:@M@MBMessagesSwift@objc(cs)MBInAppMessageFullscreenImageView">MBInAppMessageFullscreenImageView</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Other%20Classes.html">Other Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/MBInAppMessageManager.html">MBInAppMessageManager</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/MBMessage.html">MBMessage</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/MBPushMessage.html">MBPushMessage</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Other%20Enums.html">Other Enumerations</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/MessageType.html">MessageType</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Other%20Typealiases.html">Other Type Aliases</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Other%20Typealiases.html#/s:15MBMessagesSwift8MBPTopica">MBPTopic</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">

        <section class="section">
          <div class="section-content top-matter">
            
            <p><a href="https://github.com/Mumble-SRL/MBMessagesSwift/tree/master/docs"><img src="https://img.shields.io/badge/documentation-100%25-brightgreen.svg" alt="Documentation"></a>
<a href="https://swift.org/package-manager/"><img src="https://img.shields.io/badge/SPM-supported-DE5C43.svg?style=flat" alt=""></a>
<a href="https://cocoapods.org"><img src="https://img.shields.io/badge/pod-v0.1.4-blue.svg" alt="CocoaPods"></a>
<a href="https://github.com/Carthage/Carthage"><img src="https://img.shields.io/badge/Carthage-compatible-4BC51D.svg?style=flat" alt="Carthage Compatible"></a>
<a href="LICENSE"><img src="https://img.shields.io/badge/License-Apache%202.0-yellow.svg" alt="License"></a></p>
<h1 id='mbmessagesswift' class='heading'>MBMessagesSwift</h1>

<p>MBMessagesSwift is a plugin libary for <a href="https://mburger.cloud">MBurger</a>, that lets you display in app messages and manage push notifications in your app. The minimum deployment target for the library is iOS 11.0. </p>

<p>Using this library you can display the messages that you set up in the MBurger dashboard in your app. You can also setup and manage push notifications connected to your MBurger project.</p>
<h1 id='installation' class='heading'>Installation</h1>
<h2 id='swift-package-manager' class='heading'>Swift Package Manager</h2>

<p>With Xcode 11 you can start using <a href="https://swift.org/package-manager/">Swift Package Manager</a> to add <strong>MBMessagesSwift</strong> to your project. Follow those simple steps:</p>

<ul>
<li>In Xcode go to File &gt; Swift Packages &gt; Add Package Dependency.</li>
<li>Enter <code>https://github.com/Mumble-SRL/MBMessagesSwift.git</code> in the &ldquo;Choose Package Repository&rdquo; dialog and press Next.</li>
<li>Specify the version using rule &ldquo;Up to Next Major&rdquo; with &ldquo;0.1.1&rdquo; as its earliest version and press Next.</li>
<li>Xcode will try to resolving the version, after this, you can choose the <code>MBMessagesSwift</code> library and add it to your app target.</li>
</ul>
<h2 id='cocoapods' class='heading'>CocoaPods</h2>

<p>CocoaPods is a dependency manager for iOS, which automates and simplifies the process of using 3rd-party libraries in your projects. You can install CocoaPods with the following command:</p>
<pre class="highlight ruby"><code><span class="err">$</span> <span class="n">gem</span> <span class="n">install</span> <span class="n">cocoapods</span>
</code></pre>

<p>To integrate the MBMessagesSwift into your Xcode project using CocoaPods, specify it in your Podfile:</p>
<pre class="highlight ruby"><code><span class="n">platform</span> <span class="ss">:ios</span><span class="p">,</span> <span class="s1">'12.0'</span>

<span class="n">target</span> <span class="s1">'TargetName'</span> <span class="k">do</span>
    <span class="n">pod</span> <span class="s1">'MBMessagesSwift'</span>
<span class="k">end</span>
</code></pre>

<p>If you use Swift rememember to add <code>use_frameworks!</code> before the pod declaration.</p>

<p>Then, run the following command:</p>
<pre class="highlight plaintext"><code>$ pod install
</code></pre>

<p>CocoaPods is the preferred methot to install the library.</p>
<h2 id='carthage' class='heading'>Carthage</h2>

<p><a href="https://github.com/Carthage/Carthage">Carthage</a> is a decentralized dependency manager that builds your dependencies and provides you with binary frameworks. To integrate MBMessagesSwift into your Xcode project using Carthage, specify it in your Cartfile:</p>
<pre class="highlight plaintext"><code>github "Mumble-SRL/MBMessagesSwift"
</code></pre>
<h2 id='manual-installation' class='heading'>Manual installation</h2>

<p>To install the library manually drag and drop the folder <code><a href="Classes/MBMessages.html">MBMessages</a></code> to your project structure in XCode. </p>

<p>Note that <code>MBMessagesSwift</code> has <code>MBurgerSwift (1.0.8)</code> and <code>MPushSwift (0.2.13)</code> as dependencies, so you have to install also those libraries.</p>
<h1 id='initialization' class='heading'>Initialization</h1>

<p>To initialize the SDK you have to add <code>MBMessagesSwift</code> to the array of plugins of <code>MBurger</code>.</p>
<pre class="highlight swift"><code><span class="kd">import</span> <span class="kt">MBurgerSwift</span>
<span class="kd">import</span> <span class="kt">MBMessagesSwift</span>

<span class="o">...</span>

<span class="kd">func</span> <span class="nf">application</span><span class="p">(</span><span class="n">_</span> <span class="nv">application</span><span class="p">:</span> <span class="kt">UIApplication</span><span class="p">,</span> <span class="n">didFinishLaunchingWithOptions</span> <span class="nv">launchOptions</span><span class="p">:</span> <span class="p">[</span><span class="kt">UIApplicationLaunchOptionsKey</span><span class="p">:</span> <span class="kt">Any</span><span class="p">]?)</span> <span class="o">-&gt;</span> <span class="kt">Bool</span> <span class="p">{</span>

    <span class="kt">MBManager</span><span class="o">.</span><span class="n">shared</span><span class="o">.</span><span class="n">apiToken</span> <span class="o">=</span> <span class="s">"YOUR_API_TOKEN"</span>
    <span class="kt">MBManager</span><span class="o">.</span><span class="n">shared</span><span class="o">.</span><span class="n">plugins</span> <span class="o">=</span> <span class="p">[</span><span class="kt">MBMessages</span><span class="p">()]</span>

    <span class="k">return</span> <span class="kc">true</span>
<span class="p">}</span>
</code></pre>

<p>Then you have to tell MBManager.shared that the app has been opened with <code>MBManager.shared.applicationDidFinishLaunchingWithOptions(launchOptions: launchOptions)</code>, this will trigger all the startup actions of the MBurger plugins. Once you&rsquo;ve done this in app messages will be fetched automatically at the startup of the application and showed, if they need to be showed.</p>
<pre class="highlight swift"><code><span class="o">...</span>

<span class="kd">func</span> <span class="nf">application</span><span class="p">(</span><span class="n">_</span> <span class="nv">application</span><span class="p">:</span> <span class="kt">UIApplication</span><span class="p">,</span> <span class="n">didFinishLaunchingWithOptions</span> <span class="nv">launchOptions</span><span class="p">:</span> <span class="p">[</span><span class="kt">UIApplicationLaunchOptionsKey</span><span class="p">:</span> <span class="kt">Any</span><span class="p">]?)</span> <span class="o">-&gt;</span> <span class="kt">Bool</span> <span class="p">{</span>

    <span class="kt">MBManager</span><span class="o">.</span><span class="n">shared</span><span class="o">.</span><span class="n">apiToken</span> <span class="o">=</span> <span class="s">"YOUR_API_TOKEN"</span>
    <span class="kt">MBManager</span><span class="o">.</span><span class="n">shared</span><span class="o">.</span><span class="n">plugins</span> <span class="o">=</span> <span class="p">[</span><span class="kt">MBMessages</span><span class="p">()]</span>

    <span class="kt">MBManager</span><span class="o">.</span><span class="n">shared</span><span class="o">.</span><span class="nf">applicationDidFinishLaunchingWithOptions</span><span class="p">(</span><span class="nv">launchOptions</span><span class="p">:</span> <span class="n">launchOptions</span><span class="p">)</span>

    <span class="k">return</span> <span class="kc">true</span>
<span class="p">}</span>
</code></pre>
<h2 id='initialize-mbmessages-with-parameters' class='heading'>Initialize MBMessages with parameters</h2>

<p>You can set a couples of parameters when initializing the <code><a href="Classes/MBMessages.html">MBMessages</a></code> plugin:</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">messagesPlugin</span> <span class="o">=</span> <span class="kt">MBMessages</span><span class="p">(</span><span class="nv">delegate</span><span class="p">:</span> <span class="p">[</span><span class="n">the</span> <span class="n">delegate</span><span class="p">],</span>
                                <span class="nv">viewDelegate</span><span class="p">:</span> <span class="p">[</span><span class="n">view</span> <span class="n">delegate</span><span class="p">],</span>
                                <span class="nv">styleDelegate</span><span class="p">:</span> <span class="p">[</span><span class="n">style</span> <span class="n">delegate</span><span class="p">],</span>
                                <span class="nv">messagesDelay</span><span class="p">:</span> <span class="mi">1</span>
                                <span class="nv">debug</span><span class="p">:</span> <span class="kc">true</span><span class="p">)</span>

</code></pre>

<ul>
<li><strong>messagesDelay</strong>: it&rsquo;s the time after which the messages will be displayed once fetched</li>
<li><strong>debug</strong>: if this is set to <code>true</code>, all the message returned by the server will be displayed, if this is set to <code>false</code> a message will appear only once for app installation. This is <code>false</code> by default</li>
<li><strong>debug</strong>: the delegate will receive a call if the fetch of the messages fails, with the error that caused the fail, see <a href="#MBMessagesDelegate">MBMessagesDelegate</a> for more details.</li>
<li><strong>viewDelegate</strong>: the view delegates will receive calls when views of messages are showed or hidden, it will also receives a call when the button of the views will be touched, so you need to implement this protocol if you want to open an in-app link from an in app message. See <a href="#MBInAppMessageViewDelegate">MBInAppMessageViewDelegate</a> for a detailed description of the protocol.</li>
<li><strong>styleDelegate</strong>: you can use this protocol to specify colors and fonts of the in app messages. See <a href="#Stylizeinappmessages">Stylize in app messages</a> for more details</li>
</ul>
<h1 id='stylize-in-app-messages' class='heading'>Stylize in app messages</h1>

<p>If you want to specify fonts and colors of the messages displayed you can use the <code><a href="Protocols/MBInAppMessageViewStyleDelegate.html">MBInAppMessageViewStyleDelegate</a></code> protocol. All the functions of the protocol are optional, if a function is not implemented the framework will use a default value. The elements that can be stylized are the following:</p>

<ul>
<li><strong>backgroundStyle</strong>: can be a solid color or a translucent color</li>
<li><strong>backgroundColor</strong>: the color of the background</li>
<li><strong>titleColor</strong>: the text color for the title of the message</li>
<li><strong>bodyColor</strong>: the text color for the body</li>
<li><strong>closeButtonColor</strong>: the color of the close button</li>
<li><strong>button1BackgroundColor</strong>: the background color of the first action button</li>
<li><strong>button1TitleColor</strong>: the text color of the first action button</li>
<li><strong>button2BackgroundColor</strong>: the background color of the second action button</li>
<li><strong>button2TitleColor</strong>: the text color of the second action button</li>
<li><strong>button2BorderColor</strong>: the border color of the second action button</li>
<li><strong>titleFont</strong>: the font of the title</li>
<li><strong>bodyFont</strong>: the font of the body</li>
<li><strong>buttonsTextFont</strong>: the font of the buttons titles</li>
</ul>

<p>Example:</p>
<pre class="highlight swift"><code><span class="kd">func</span> <span class="nf">backgroundStyle</span><span class="p">(</span><span class="n">forMessage</span> <span class="nv">message</span><span class="p">:</span> <span class="kt">MBInAppMessage</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">MBInAppMessageViewBackgroundStyle</span> <span class="p">{</span>
    <span class="k">return</span> <span class="o">.</span><span class="n">solid</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">backgroundColor</span><span class="p">(</span><span class="n">forMessage</span> <span class="nv">message</span><span class="p">:</span> <span class="kt">MBInAppMessage</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">UIColor</span> <span class="p">{</span>
    <span class="k">return</span> <span class="o">.</span><span class="n">green</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">titleColor</span><span class="p">(</span><span class="n">forMessage</span> <span class="nv">message</span><span class="p">:</span> <span class="kt">MBInAppMessage</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">UIColor</span> <span class="p">{</span>
    <span class="k">return</span> <span class="o">.</span><span class="n">blue</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">bodyColor</span><span class="p">(</span><span class="n">forMessage</span> <span class="nv">message</span><span class="p">:</span> <span class="kt">MBInAppMessage</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">UIColor</span> <span class="p">{</span>
    <span class="k">return</span> <span class="o">.</span><span class="n">darkText</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">button1TitleColor</span><span class="p">(</span><span class="n">forMessage</span> <span class="nv">message</span><span class="p">:</span> <span class="kt">MBInAppMessage</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">UIColor</span> <span class="p">{</span>
    <span class="k">return</span> <span class="o">.</span><span class="n">white</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">button1BackgroundColor</span><span class="p">(</span><span class="n">forMessage</span> <span class="nv">message</span><span class="p">:</span> <span class="kt">MBInAppMessage</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">UIColor</span> <span class="p">{</span>
    <span class="k">return</span> <span class="o">.</span><span class="n">cyan</span>
<span class="p">}</span>
</code></pre>
<h3 id='mbmessagesdelegate' class='heading'>MBMessagesDelegate</h3>

<p>Implement this protocol if you want to receive a function call when in app messages view are showed or hidden. You will need to use this protocol also if you want to responsd to a user tapping on buttons on in app messages view.</p>

<p><code>viewWillAppear</code> and <code>viewDidAppear</code> are called when the view is showed, <code>viewWillDisappear</code> and <code>viewDidDisappear</code> when it&rsquo;s hidden.</p>
<pre class="highlight swift"><code><span class="kd">func</span> <span class="nf">viewWillAppear</span><span class="p">(</span><span class="nv">view</span><span class="p">:</span> <span class="kt">MBInAppMessageView</span><span class="p">)</span>
<span class="kd">func</span> <span class="nf">viewDidAppear</span><span class="p">(</span><span class="nv">view</span><span class="p">:</span> <span class="kt">MBInAppMessageView</span><span class="p">)</span>
<span class="kd">func</span> <span class="nf">viewWillDisappear</span><span class="p">(</span><span class="nv">view</span><span class="p">:</span> <span class="kt">MBInAppMessageView</span><span class="p">)</span>
<span class="kd">func</span> <span class="nf">viewDidDisappear</span><span class="p">(</span><span class="nv">view</span><span class="p">:</span> <span class="kt">MBInAppMessageView</span><span class="p">)</span>
</code></pre>

<p>To respond to a user tapping on a button you have to implement <code>func buttonPressed(view: MBInAppMessageView, button: MBInAppMessageButton)</code>, here&rsquo;s an example:</p>
<pre class="highlight swift"><code><span class="kd">func</span> <span class="nf">buttonPressed</span><span class="p">(</span><span class="nv">view</span><span class="p">:</span> <span class="kt">MBInAppMessageView</span><span class="p">,</span> <span class="nv">button</span><span class="p">:</span> <span class="kt">MBInAppMessageButton</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">linkType</span> <span class="o">=</span> <span class="n">button</span><span class="o">.</span><span class="n">linkType</span>
    <span class="k">if</span> <span class="n">linkType</span> <span class="o">==</span> <span class="o">.</span><span class="n">link</span> <span class="o">&amp;&amp;</span> <span class="n">button</span><span class="o">.</span><span class="n">link</span><span class="o">.</span><span class="nf">hasPrefix</span><span class="p">(</span><span class="s">"http"</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="k">let</span> <span class="nv">url</span> <span class="o">=</span> <span class="kt">URL</span><span class="p">(</span><span class="nv">string</span><span class="p">:</span> <span class="n">button</span><span class="o">.</span><span class="n">link</span><span class="p">)</span> <span class="p">{</span>
            <span class="c1">//Open url</span>
        <span class="p">}</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="c1">// Open in app link (button.link)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<h3 id='mbmessagesdelegate' class='heading'>MBMessagesDelegate</h3>

<p>Implement this protocol if you want to receives a call when the fetches of the message fails from the server:</p>
<pre class="highlight swift"><code><span class="kd">func</span> <span class="nf">inAppMessageCheckFailed</span><span class="p">(</span><span class="nv">sender</span><span class="p">:</span> <span class="kt">MBMessages</span><span class="p">,</span> <span class="nv">error</span><span class="p">:</span> <span class="kt">Error</span><span class="p">?)</span>
</code></pre>
<h1 id='push-notifications' class='heading'>Push notifications</h1>

<p>With this plugin you can also manage the push notification section of MBurger, this is a wrapper around MPush, the underlying platform, so you should refer to the <a href="https://github.com/Mumble-SRL/MPush-Swift">MPush documentation 
</a> to understand the concepts and to start the push integration. In order to use <code>MBMessagesSwift</code> instead of <code>MPushSwift</code> you have to do the following changes:</p>

<p>Set the push token like this:</p>
<pre class="highlight swift"><code><span class="kt">MBMessages</span><span class="o">.</span><span class="n">pushToken</span> <span class="o">=</span> <span class="s">"YOUR_PUSH_TOKEN"</span>
</code></pre>

<p>And then register your device to topics (all the other function have a similar syntax change):</p>
<pre class="highlight swift"><code><span class="kt">MBMessages</span><span class="o">.</span><span class="nf">registerDeviceToPush</span><span class="p">(</span><span class="nv">deviceToken</span><span class="p">:</span> <span class="n">deviceToken</span><span class="p">,</span> <span class="nv">success</span><span class="p">:</span> <span class="p">{</span>
    <span class="kt">MBMessages</span><span class="o">.</span><span class="nf">registerPushMessages</span><span class="p">(</span><span class="nv">toTopic</span><span class="p">:</span> <span class="kt">MBPTopic</span><span class="p">(</span><span class="s">"YOUR_TOPIC"</span><span class="p">))</span>
<span class="p">})</span>
</code></pre>

<p>MBurger hsa 2 default topics that you should use in order to guarantee the correct functtionality of the engagement platform:</p>

<ul>
<li><code><a href="Classes/MBMessages.html#/s:15MBMessagesSwift0A0C16projectPushTopic05MPushB07MPTopicCvpZ">MBMessages.projectPushTopic</a></code>: this topic represents all devices registred to push notifications for this project</li>
<li><code><a href="Classes/MBMessages.html#/s:15MBMessagesSwift0A0C15devicePushTopic05MPushB07MPTopicCvpZ">MBMessages.devicePushTopic</a></code>: this topic represents the current device</li>
</ul>
<pre class="highlight swift"><code><span class="kt">MBMessages</span><span class="o">.</span><span class="nf">registerPushMessages</span><span class="p">(</span><span class="nv">toTopics</span><span class="p">:[</span><span class="kt">MBMessages</span><span class="o">.</span><span class="n">mburgerPushTopic</span><span class="p">,</span>
                                          <span class="kt">MBMessages</span><span class="o">.</span><span class="n">devicePushTopic</span><span class="p">,</span>
                                          <span class="kt">MBPTopic</span><span class="p">(</span><span class="s">"OTHER_TOPIC"</span><span class="p">)])</span>
</code></pre>
<h3 id='mbptopic-additional-parameters' class='heading'>MBPTopic additional parameters</h3>

<p>When creating topic you can specify additional parameters:</p>

<ul>
<li><code>title</code>: a title fot that topic that will be displayed in the dashboard, if not specified it has the same value as the topic id</li>
<li><code>single</code>: If the topic identify a single user or a group of users, defaults to <code>false</code></li>
</ul>
<h1 id='user-interaction-with-a-push' class='heading'>User interaction with a push</h1>

<p>With <code>MBMessagesSwift</code> you can setup a callback that will be called when the user interacts with a push notification or opens the app from a push. You can setup the code like this, the payload variable will be the payload of the push:</p>
<pre class="highlight swift"><code><span class="kt">MBMessages</span><span class="o">.</span><span class="n">userDidInteractWithNotificationBlock</span> <span class="o">=</span> <span class="p">{</span> <span class="n">payload</span> <span class="k">in</span>
    <span class="c1">// Do actions in response</span>
    <span class="nf">print</span><span class="p">(</span><span class="s">"Notification arrived:</span><span class="se">\n\(</span><span class="n">payload</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
<span class="p">}</span>
</code></pre>

<p>In order to this to function you will have to tell <code>MBMessagesSwift</code> that a notification has arrived so you need to add this in those lines in your <code>UNUserNotificationCenterDelegate</code> class, often the <code>AppDelegate</code>.</p>
<pre class="highlight swift"><code><span class="kd">func</span> <span class="nf">userNotificationCenter</span><span class="p">(</span><span class="n">_</span> <span class="nv">center</span><span class="p">:</span> <span class="kt">UNUserNotificationCenter</span><span class="p">,</span>
                            <span class="n">willPresent</span> <span class="nv">notification</span><span class="p">:</span> <span class="kt">UNNotification</span><span class="p">,</span>
                            <span class="n">withCompletionHandler</span>
    <span class="nv">completionHandler</span><span class="p">:</span> <span class="kd">@escaping</span> <span class="p">(</span><span class="kt">UNNotificationPresentationOptions</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Void</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Add this line</span>
    <span class="kt">MBMessages</span><span class="o">.</span><span class="nf">userNotificationCenter</span><span class="p">(</span><span class="nv">willPresent</span><span class="p">:</span> <span class="n">notification</span><span class="p">)</span>
    <span class="nf">completionHandler</span><span class="p">(</span><span class="kt">UNNotificationPresentationOptions</span><span class="o">.</span><span class="n">alert</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">userNotificationCenter</span><span class="p">(</span><span class="n">_</span> <span class="nv">center</span><span class="p">:</span> <span class="kt">UNUserNotificationCenter</span><span class="p">,</span>
                            <span class="n">didReceive</span> <span class="nv">response</span><span class="p">:</span> <span class="kt">UNNotificationResponse</span><span class="p">,</span>
                            <span class="n">withCompletionHandler</span>
    <span class="nv">completionHandler</span><span class="p">:</span> <span class="kd">@escaping</span> <span class="p">()</span> <span class="o">-&gt;</span> <span class="kt">Void</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Add this line</span>
    <span class="kt">MBMessages</span><span class="o">.</span><span class="nf">userNotificationCenter</span><span class="p">(</span><span class="nv">didReceive</span><span class="p">:</span> <span class="n">response</span><span class="p">)</span>
    <span class="nf">completionHandler</span><span class="p">()</span>
<span class="p">}</span>
</code></pre>
<h1 id='message-metrics' class='heading'>Message Metrics</h1>

<p>Using <code>MBMessagesSwift</code> gives you also the chanche to collect informations about your user and the push, those will be displyed on the <a href="https://mburger.cloud">MBurger</a> dashboard. As described in the prervious paragraph, in order for this to function, you have to tell <code>MBMessagesSwift</code> that a push has arrived, if you&rsquo;ve already done it in the step above you&rsquo;re fine, otherwise you need to add <code>MBMessages.userNotificationCenter(willPresent: notification)</code> and <code>MBMessages.userNotificationCenter(didReceive: response)</code> to your <code>UNUserNotificationCenterDelegate</code> class.</p>
<h1 id='automation' class='heading'>Automation</h1>

<p>If messages have automation enabled they will be ignored and managed by the <a href="https://github.com/Mumble-SRL/MBAutomationSwift.git">MBAutomationSwift SDK</a> so make sure to include and configure the automation SDK correctly.</p>

          </div>
        </section>


      </article>
    </div>
    <section class="footer">
      <p>&copy; 2020 <a class="link" href="https://mumbleideas.it/" target="_blank" rel="external">Mumble</a>. All rights reserved. (Last updated: 2020-07-24)</p>
      <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.13.5</a>, a <a class="link" href="https://realm.io" target="_blank" rel="external">Realm</a> project.</p>
    </section>
  </body>
</div>
</html>
